# One-Core Architecture

레거시 시스템의 구조적 병목을 **단일 도메인 코어(One Core)** 아키텍처로 해결하기 위한 참조 구현 예제입니다.
본 프로젝트는 실제 서비스 완성보다 **아키텍처 설계 의도, 의사결정 과정, 도메인 모델링**을 통해 실무 제약 속에서도 적용 가능한 최선의 구조를 고민한 결과를 보여주는 데 목적이 있습니다.

---

## 🎯 프로젝트 목적 (Why One-Core?)

실무에서 레거시 시스템은 보통 다음과 같은 문제를 안고 성장합니다.

* 시스템별로 분리·중복된 비즈니스 로직
* 서로 다른 데이터 모델로 인한 정합성 저하
* 동기 연동에 따른 장애 전파 및 성능 병목
* 변경 시 전체 시스템에 영향이 전파되는 구조

**One-Core Architecture**는 이러한 문제를 해결하기 위해:

* 비즈니스 규칙을 단일 도메인 코어로 집중시키고
* 외부 시스템은 이벤트 기반으로 느슨하게 연동하며
* 코어 도메인의 안정성과 확장성을 최우선으로 설계합니다.

---

## 🧱 아키텍처 개요

### 핵심 개념

* **DDD (Domain-Driven Design)**
* **Event-Driven Architecture**
* **Hexagonal Architecture (Ports & Adapters)**
* **단일 도메인 코어 + 다수의 외부 어댑터 구조**

```
[ External Systems ]
        │
        ▼ (Event / Adapter)
┌─────────────────────────┐
│        One Core          │
│  - Domain Model          │
│  - Business Rules        │
│  - Domain Events         │
└─────────────────────────┘
        │
        ▼ (Async Event)
[ Message Broker (Redis) ]
```

---

## 📦 패키지 구조

```
one-core-architecture
├── core
│   ├── domain          # 순수 도메인 (비즈니스 규칙)
│   ├── application     # 유스케이스 / 서비스 계층
│   └── infrastructure  # DB, 메시징 구현체
├── adapter
│   ├── api             # REST API 어댑터
│   └── external        # 레거시 / 외부 시스템 연동
└── docs
    ├── architecture.md # 아키텍처 설명
    ├── domain-model.md # 도메인 모델 정의
    └── decisions.md    # 기술적 의사결정 기록
```

---

## 🧠 설계 원칙

### 1. 도메인은 외부를 모른다

* 도메인 계층은 프레임워크, DB, 메시지 브로커에 의존하지 않습니다.
* 모든 외부 의존성은 Adapter 계층에서 처리합니다.

### 2. 비즈니스 이벤트 중심 설계

* 상태 변경은 **Domain Event**로 표현합니다.
* 이벤트는 동기 처리 흐름을 끊고, 장애 전파를 차단합니다.

### 3. 운영 가능한 아키텍처

* 복잡한 기술보다 **운영 비용과 안정성**을 우선합니다.
* Redis Pub/Sub은 메시지 순서 보장 및 At-Least-Once가 필요 없는 도메인에 한해 선택합니다.

---

## ⚡ Event-Driven 흐름 예시

1. 도메인 내부에서 상태 변경 발생
2. Domain Event 생성
3. 이벤트 발행 (Redis Pub/Sub)
4. 외부 시스템은 비동기로 이벤트 소비
5. Core는 외부 장애와 무관하게 동작

---

## 📈 기대 효과

* 레거시 도메인 통합을 통한 **중복 로직 제거**
* 비동기 전환으로 **트래픽 스파이크 대응력 향상**
* 코어 중심 설계로 **변경 영향 최소화**
* 장기적으로 MSA 또는 모듈 분리로 확장 가능

---

## 👀 이 프로젝트를 보면 좋은 사람

* 레거시 시스템 리팩터링을 고민하는 백엔드 엔지니어
* DDD를 실무 관점에서 적용하고 싶은 개발자
* 구조적 설계를 설명할 수 있는 포트폴리오가 필요한 엔지니어

---

## ✍️ 작성자

김지호
